<HTML>
<HEAD>
<TITLE>VOTABLE::STREAM - VOTABLE STREAM XML element class</TITLE>
<LINK REV="made" HREF="mailto:elwinter@olegacy.gsfc.nasa.gov">
</HEAD>

<BODY>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#description">DESCRIPTION</A></LI>
	<UL>

		<LI><A HREF="#methods">Methods</A></LI>
		<UL>

			<LI><A HREF="#new($str_or_ref, %options)"><CODE>new($str_or_ref, %options)</CODE></A></LI>
			<LI><A HREF="#get_actuate"><CODE>get_actuate</CODE></A></LI>
			<LI><A HREF="#set_actuate($actuate)"><CODE>set_actuate($actuate)</CODE></A></LI>
			<LI><A HREF="#get_encoding"><CODE>get_encoding</CODE></A></LI>
			<LI><A HREF="#set_encoding($encoding)"><CODE>set_encoding($encoding)</CODE></A></LI>
			<LI><A HREF="#get_expires"><CODE>get_expires</CODE></A></LI>
			<LI><A HREF="#set_expires($expires)"><CODE>set_expires($expires)</CODE></A></LI>
			<LI><A HREF="#get_href"><CODE>get_href</CODE></A></LI>
			<LI><A HREF="#set_href($href)"><CODE>set_href($href)</CODE></A></LI>
			<LI><A HREF="#get_rights"><CODE>get_rights</CODE></A></LI>
			<LI><A HREF="#set_rights($rights)"><CODE>set_rights($rights)</CODE></A></LI>
			<LI><A HREF="#get_type"><CODE>get_type</CODE></A></LI>
			<LI><A HREF="#set_type($type)"><CODE>set_type($type)</CODE></A></LI>
			<LI><A HREF="#actuate"><CODE>actuate</CODE></A></LI>
			<LI><A HREF="#get_content($offset, $length)"><CODE>get_content($offset, $length)</CODE></A></LI>
			<LI><A HREF="#set_content($bytes, $offset, $length)"><CODE>set_content($bytes, $offset, $length)</CODE></A></LI>
			<LI><A HREF="#serialize"><CODE>serialize</CODE></A></LI>
		</UL>

		<LI><A HREF="#notes on class internals">Notes on class internals</A></LI>
	</UL>

	<LI><A HREF="#warnings">WARNINGS</A></LI>
	<LI><A HREF="#see also">SEE ALSO</A></LI>
	<LI><A HREF="#author">AUTHOR</A></LI>
	<LI><A HREF="#version">VERSION</A></LI>
</UL>
<!-- INDEX END -->

<HR>
<P>
<HR>
<H1><A NAME="name">NAME</A></H1>
<P>VOTABLE::STREAM - VOTABLE STREAM XML element class</P>
<P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<PRE>
 use VOTABLE::STREAM;</PRE>
<P>
<HR>
<H1><A NAME="description">DESCRIPTION</A></H1>
<P>This class implements the <CODE>STREAM</CODE> element from the <CODE>VOTABLE</CODE>
DTD. This element is used to encapsulate streams of arbitrary data,
possibly encoded and/or compressed.</P>
<P>The <CODE>STREAM</CODE> element is a Tier 0 element, and is described by the
following excerpt from the <CODE>VOTABLE</CODE> 1.0 DTD:</P>
<PRE>
 &lt;!ELEMENT STREAM (#PCDATA)&gt;
 &lt;!ATTLIST STREAM
         type (locator | other) &quot;locator&quot;
         href CDATA #IMPLIED
         actuate (onLoad | onRequest | other | none) &quot;onRequest&quot;
         encoding (gzip | base64 | dynamic | none) &quot;none&quot;
         expires CDATA #IMPLIED
         rights CDATA #IMPLIED
 &gt;</PRE>
<P>
<H2><A NAME="methods">Methods</A></H2>
<P>
<H3><A NAME="new($str_or_ref, %options)"><CODE>new($str_or_ref, %options)</CODE></A></H3>
<P>Create a new <CODE>VOTABLE::STREAM</CODE> object, and return a reference to
it. If the first argument (<CODE>$str_or_ref</CODE>) is a string, it is used as
the initial <CODE>#PCDATA</CODE> content of the <CODE>STREAM</CODE> element. If the first
argument is a reference to a <CODE>XML::DOM::Element</CODE> object, that object
is used to initialize the new <CODE>STREAM</CODE> element (implicitly assuming
that the <CODE>XML::DOM::Element</CODE> object contains a valid <CODE>STREAM</CODE>
element). The <CODE>%options</CODE> hash is used to set the attributes of the
new element. If the first argument is missing or undefined, or an
empty string, create and return an empty <CODE>VOTABLE::STREAM</CODE>
object. Return <CODE>undef</CODE> if an error occurs.</P>
<P>
<H3><A NAME="get_actuate"><CODE>get_actuate</CODE></A></H3>
<P>Return the value of the <CODE>actuate</CODE> attribute. Return <CODE>undef</CODE> if the
attribute has not been set, or an error occurs.</P>
<P>
<H3><A NAME="set_actuate($actuate)"><CODE>set_actuate($actuate)</CODE></A></H3>
<P>Set the value of the <CODE>actuate</CODE> attribute to the specified value. The
new value is checked for correctness against the list of allowed
values. Use <CODE>undef</CODE> as the argument to clear any existing value of
the attribute. Return the new value of the attribute on success, or
<CODE>undef</CODE> if an error occurs.</P>
<P>
<H3><A NAME="get_encoding"><CODE>get_encoding</CODE></A></H3>
<P>Return the value of the <CODE>encoding</CODE> attribute. Return <CODE>undef</CODE> if the
attribute has not been set, or an error occurs.</P>
<P>
<H3><A NAME="set_encoding($encoding)"><CODE>set_encoding($encoding)</CODE></A></H3>
<P>Set the value of the <CODE>encoding</CODE> attribute to the specified value. The
new value is checked for correctness against the list of allowed
values. Use <CODE>undef</CODE> as the argument to clear any existing value of
the attribute. Return the new value of the attribute on success, or
<CODE>undef</CODE> if an error occurs.</P>
<P>
<H3><A NAME="get_expires"><CODE>get_expires</CODE></A></H3>
<P>Return the value of the <CODE>expires</CODE> attribute. Return <CODE>undef</CODE> if the
attribute has not been set, or an error occurs.</P>
<P>
<H3><A NAME="set_expires($expires)"><CODE>set_expires($expires)</CODE></A></H3>
<P>Set the value of the <CODE>expires</CODE> attribute to the specified value. Use
<CODE>undef</CODE> as the argument to clear any existing value of the
attribute. Return the new value of the attribute on success, or
<CODE>undef</CODE> if an error occurs.</P>
<P>
<H3><A NAME="get_href"><CODE>get_href</CODE></A></H3>
<P>Return the value of the <CODE>href</CODE> attribute. Return <CODE>undef</CODE> if the
attribute has not been set, or an error occurs.</P>
<P>
<H3><A NAME="set_href($href)"><CODE>set_href($href)</CODE></A></H3>
<P>Set the value of the <CODE>href</CODE> attribute to the specified value. Use
<CODE>undef</CODE> as the argument to clear any existing value of the
attribute. Return the new value of the attribute on success, or
<CODE>undef</CODE> if an error occurs.</P>
<P>
<H3><A NAME="get_rights"><CODE>get_rights</CODE></A></H3>
<P>Return the value of the <CODE>rights</CODE> attribute. Return <CODE>undef</CODE> if the
attribute has not been set, or an error occurs.</P>
<P>
<H3><A NAME="set_rights($rights)"><CODE>set_rights($rights)</CODE></A></H3>
<P>Set the value of the <CODE>rights</CODE> attribute to the specified value. Use
<CODE>undef</CODE> as the argument to clear any existing value of the
attribute. Return the new value of the attribute on success, or
<CODE>undef</CODE> if an error occurs.</P>
<P>
<H3><A NAME="get_type"><CODE>get_type</CODE></A></H3>
<P>Return the value of the <CODE>type</CODE> attribute. Return <CODE>undef</CODE> if the
attribute has not been set, or an error occurs.</P>
<P>
<H3><A NAME="set_type($type)"><CODE>set_type($type)</CODE></A></H3>
<P>Set the value of the <CODE>type</CODE> attribute to the specified value. The new
value is checked for correctness against the list of allowed
values. Use <CODE>undef</CODE> as the argument to clear any existing value of
the attribute. Return the new value of the attribute on success, or
<CODE>undef</CODE> if an error occurs.</P>
<P>
<H3><A NAME="actuate"><CODE>actuate</CODE></A></H3>
<P>Read the content of the stream from the source specified by the
<CODE>href</CODE> attribute, and store it internally. Return true (<CODE>1</CODE>) on
success, and false (<CODE>0</CODE>) if an error occurs.</P>
<P>
<H3><A NAME="get_content($offset, $length)"><CODE>get_content($offset, $length)</CODE></A></H3>
<P>Return a portion of the content string starting at <CODE>$offset</CODE> bytes
and continuing for <CODE>$length</CODE> bytes. If <CODE>$offset</CODE> and <CODE>$length</CODE> are
not specified, return the entire content as a single byte string. If
<CODE>$offset</CODE> is specified but <CODE>$length</CODE> is not, return the content from
<CODE>$offset</CODE> to the end of the string. Otherwise, the <CODE>$offset</CODE> and
<CODE>$length</CODE> arguments are treated the same as the corresponding
arguments to the <CODE>substr</CODE> subroutine. If required, the stream content
is actuated (by calling the <CODE>actuate</CODE> method) prior to extracting the
content. Return the content as a string, or <CODE>undef</CODE> if an error
occurs.</P>
<P>
<H3><A NAME="set_content($bytes, $offset, $length)"><CODE>set_content($bytes, $offset, $length)</CODE></A></H3>
<P>Set the specified portion of the content of the <CODE>STREAM</CODE>, starting at
<CODE>$offset</CODE> and continuing for <CODE>$length</CODE> bytes, to the specified byte
string. If <CODE>$offset</CODE> and <CODE>$length</CODE> are not specified, the current
content is replaced by the specified byte string. If <CODE>$offset</CODE> is
specified but <CODE>$length</CODE> is not specified, <CODE>$length</CODE> defaults to the
length of <CODE>$bytes</CODE>. Otherwise, <CODE>$offset</CODE> and <CODE>$length</CODE> behave as
the corresponding arguments to <CODE>substr</CODE>. Return the new string on
success, or <CODE>undef</CODE> on error.</P>
<P>
<H3><A NAME="serialize"><CODE>serialize</CODE></A></H3>
<P>Write the current content string to the location specified by the
<CODE>href</CODE> attribute, using the current value of the <CODE>encoding</CODE>
attribute. Return true (<CODE>1</CODE>) on success, or false (<CODE>0</CODE>) on error.</P>
<P>
<H2><A NAME="notes on class internals">Notes on class internals</A></H2>
<UL>
<LI>
Method names that begin with a leading underscore ('<CODE>_</CODE>') are for
internal use only, and should <EM>not</EM> be used outside of the <CODE>VOTABLE</CODE>
class hierarchy.
<P></P>
<LI>
The names of the <CODE>get_XXX</CODE> and <CODE>set_XXX</CODE> accessors for attributes
and elements are derived directly from the names of the attributes or
elements, with the attribute or element name replacing
<CODE>XXX</CODE>. Attribute and element names containing embedded hyphens
('<CODE>-</CODE>') use accessors where the hyphen is mapped to an underscore
('<CODE>_</CODE>') in the name of the accessor method. This is a necessity,
since the hyphen is not a valid name character in Perl.
<P></P></UL>
<P>
<HR>
<H1><A NAME="warnings">WARNINGS</A></H1>
<UL>
<LI>
A <CODE>STREAM</CODE> which refers to an external data source (such as a binary
file) nust use the <CODE>locator</CODE> value for the <CODE>type</CODE> attribute. The
value of <CODE>other</CODE> for the <CODE>type</CODE> attribute is not yet supported.
<P></P>
<LI>
The <CODE>href</CODE> attribute currently supports only the <CODE>file</CODE> protocol,
i.e. files on the local machine. Therefore, values for the <CODE>href</CODE>
attribute must be of the form <CODE>file://path/to/the/file</CODE>.
<P></P>
<LI>
All actuation (reading of data from its source) is invoked
automatically by the code as needed (for now). In other words, the
value of the <CODE>actuate</CODE> attribute is ignored for now, but it acts as
if the value <CODE>onRequest</CODE> was in effect.
<P></P>
<LI>
The <CODE>encoding</CODE> attribute currently supports only the value <CODE>none</CODE>.
<P></P>
<LI>
The <CODE>expires</CODE> and <CODE>rights</CODE> attributes are currently ignored.
<P></P>
<LI>
This class currently makes no use of the <CODE>#PCDATA</CODE> content of the
element. In the future, the <CODE>#PCDATA</CODE> content may be used to store
embedded data.
<P></P>
<LI>
This code (perhaps unwisely) assumes that object internal structure is
always maintained. For example, this code assumes that every
<CODE>VOTABLE</CODE> object <EM>always</EM> has an underlying <CODE>XML::DOM::Element</CODE>
object. As long as the internal structure is manipulated only by the
publicly-available methods, this should be an adequate assumption. If
a method detects an aberrant case, a warning message is printed (using
the <CODE>Carp::carp</CODE> subroutine), and the method fails.
<P></P>
<LI>
This code also assumes that all internal methods always succeed.
<P></P>
<LI>
Similarly, this code assumes that <CODE>XML::DOM</CODE> methods always
succeed. If a method detects an aberrant case, a warning message is
printed (using the <CODE>Carp::carp</CODE> subroutine), and the method fails.
<P></P>
<LI>
Most attribute <CODE>set_XXX</CODE> accessors do not perform validation of the
new attribute values. The exceptions are the accessors for attributes
with enumerated values; the new value is checked against the list of
acceptable values, as defined in the DTD.
<P></P></UL>
<P>
<HR>
<H1><A NAME="see also">SEE ALSO</A></H1>
<P><CODE>VOTABLE</CODE>, <CODE>VOTABLE::BINARY</CODE>, <CODE>VOTABLE::FITS</CODE></P>
<P>
<HR>
<H1><A NAME="author">AUTHOR</A></H1>
<P>Eric Winter, NASA GSFC (<A HREF="mailto:elwinter@milkyway.gsfc.nasa.gov">elwinter@milkyway.gsfc.nasa.gov</A>)</P>
<P>
<HR>
<H1><A NAME="version">VERSION</A></H1>
<P>$Id: STREAM.pm,v 1.1.1.15 2002/06/09 21:13:08 elwinter Exp $</P>

</BODY>

</HTML>
